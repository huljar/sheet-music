\input musixtex
\input musixsty
\input musixps

% Setup
\generalmeter{\meterfrac44} % 4/4 meter
\generalsignature2 % 2 sharp signs
%\nobarnumbers

% Title
\fulltitle{Star Wars Medley}
\subtitle{Star Wars}
\title{Star Wars Medley}
\author{}
\shortauthor{Star Wars}
\othermention{}
\maketitle

% % % some bagpipe macros % % %
\makeatletter
\newdimen\@spacecache

\def\startembellishment{%
    \tinynotesize%
    \@spacecache=\noteskip%
    \noteskip=1.3\qn@width}
\def\endembellishment{%
    \normalnotesize%
    \noteskip=\the\@spacecache}

% a single grace note
\def\gr#1{%
    \startembellishment%
    \cccu{#1}%
    \hqsk%
    \endembellishment}

% common lifting grace notes (d, e, high g)
\def\grd{%
    \gr k}
\def\gre{%
    \gr l}
\def\grg{%
    \gr n}

% common tapping grace notes (a, low g)
\def\gra{%
    \gr h}
\def\grlg{%
    \gr g}

% Light D Strike
\def\lds{%
    \startembellishment%
    \ibbbu5n{-5}\qb5{nk}\tqu5j%
    \endembellishment}

% Heavy D Strike
\def\hds{%
    \startembellishment%
    \ibbbu5n{-5}\qb5{nk}\tqu5g%
    \endembellishment}

% D Throw (light/heavy)
\def\dth{%
    \startembellishment%
    \ibbbu5j2\qb5{gk}\tqu5j%
    \endembellishment}

% doubling
\def\dbl#1#2#3#4{%
    \startembellishment%
    \ibbbu5{#1}{#4}\qb5{#1#2}\tqu5{#3}%
    \endembellishment}

% common doublings
\def\dblc{%
    \dbl{n}{j}{k}{-4}}
\def\dbld{%
    \dbl{n}{k}{l}{-3}}
\def\dble{%
    \dbl{n}{l}{m}{-2}}

% half doubling
\def\hd#1#2#3{%
    \startembellishment%
    \ibbbu5{#1}{#3}\qb5{#1}\tqu5{#2}%
    \endembellishment}

% common half doublings
\def\hdha{%
    \hd on{-3}}
\def\hde{%
    \hd lm{3}}

\makeatother
% % % end bagpipe macros % % %

% Start serious business
\startpiece%
\notes\hl o\en
\bar
\notes\ibbl0h0\qb0h\grd\tql0h\gre\ibl0h0\qb0h\grg\tql0h\en
\bar
\notes\grd\ql h\dble\ql l\gra\ql l\dbld\ibl0k{-1}\qb0{kj}\tql0i\en
\bar
\notes\hdha\hl o\hde\ql l\dbld\ibl0k0\qb0{kj}\tql0i\en
\bar
\notes\hdha\hl o\hde\ql l\dbld\ibl0k0\qb0{kj}\tql0k\en
\bar
\notes\grg\hl i\ibl0h0\qb0h\grd\qb0h\gre\tql0h\en
\alaligne
\NOTEs\Uptext{Bars 3+4 again}\sk\sk\sk\en
\bar
\notes\grg\ql i\ibl0h0\qb0h\grd\tql0h\ql i\gra\cl i\ibl0n{-2}\qb0{nml}\tql0k\en
\bar
\notes\grg\ibl0k1\qb0{kl}\tql0m\ql l\ql h\grg\ql i\ibl0h0\qb0h\grd\tql0h\en
\bar
\notes\ql i\gra\cl i\ibl0n{-2}\qb0{nml}\tql0k\en
\alaligne
\notes\ql o\ql l\ibl0h0\qb0h\grd\tql0h\en
\bar
\notes\ql i\gra\cl i\ibl0n{-2}\qb0{nml}\tql0k\en
\bar
\notes\grg\ibl0k1\qb0{kl}\tql0m\ql l\ql h\grg\ql i\ql k\grlg\cl k\en
\bar
\notes\ibl0o{-2}\qb0{onm}\tql0l\ibl0k{-2}\qb0{kji}\tql0h\en
\bar
\notes\hl o\hl l\en
\alaligne
\notes\grg\ql i\grd\ql i\gre\ql i\ibl0g4\qbp0g\tql0k\en
\bar
\notes\grg\ql i\ibl0g4\qbp0g\tql0k\grg\hl i\en
\bar
\notes\ql m\grg\ql m\gre\ql m\ibl0o{-4}\qbp0o\tql0k\en
\bar
\notes\ql i\ibl0g4\qbp0g\tql0k\grg\hl i\en
% Wrap up serious business
\Endpiece%
\end
