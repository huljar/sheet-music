\input musixtex
\input musixsty
\input musixps

% Setup
\generalmeter{\meterfrac44} % 4/4 meter
\generalsignature2 % 2 sharp signs
%\nobarnumbers

% Title
\fulltitle{Star Wars Medley}
\subtitle{Star Wars}
\title{Star Wars Medley}
\author{}
\shortauthor{Star Wars}
\othermention{}
\maketitle

% % % some bagpipe macros % % %
\makeatletter
\newdimen\@spacecache

\def\startembellishment#1{%
    \tinynotesize%
    \@spacecache=\noteskip%
    \noteskip=#1\elemskip}
\def\endembellishment{%
    \normalnotesize%
    \noteskip=\the\@spacecache}

% a single grace note
\def\gr#1{%
    \startembellishment{0.6}%
    \cccu{#1}%
    \endembellishment}

% common lifting grace notes (d, e, high g)
\def\grd{%
    \gr k}
\def\gre{%
    \gr l}
\def\grg{%
    \gr n}

% common tapping grace notes (a)
\def\gra{%
    \gr h}

% Light D Strike
\def\lds{%
    \startembellishment{0.4}%
    \ibbbu5n{-5}\qb5{nk}\tqu5j%
    \endembellishment}

% Heavy D Strike
\def\hds{%
    \startembellishment{0.4}%
    \ibbbu5n{-5}\qb5{nk}\tqu5g%
    \endembellishment}

% D Throw (light/heavy)
\def\dth{%
    \startembellishment{0.4}%
    \ibbbu5j2\qb5{gk}\tqu5j%
    \endembellishment}

% doubling
\def\dbl#1#2#3#4{%
    \startembellishment{0.4}%
    \ibbbu5{#1}{#4}\qb5{#1#2}\tqu5{#3}%
    \endembellishment}

% common doublings
\def\dblc{%
    \dbl{n}{j}{k}{-4}}
\def\dbld{%
    \dbl{n}{k}{l}{-3}}
\def\dble{%
    \dbl{n}{l}{m}{-2}}

% half doubling
\def\hd#1#2#3{%
    \startembellishment{0.4}%
    \ibbbu5{#1}{#3}\qb5{#1}\tqu5{#2}%
    \endembellishment}

% common half doublings
\def\hdha{%
    \hd{o}{n}{-3}}
\def\hde{%
    \hd{l}{m}{3}}

\makeatother
% % % end bagpipe macros % % %

% Start serious business
\startpiece%
\notes\grg\ibbl0h0\qb0h\grd\tql0h\gre\ibl0h0\qb0h\grg\tql0h\en
\bar
\notes\grd\ql h\dble\ql l\gra\ql l\dbld\ibl0k{-1}\qb0{kj}\tql0i\en
\bar
\notes\hdha\hl o\hde\ql l\dbld\ibl0k0\qb0{kj}\tql0k\en
\bar
\notes\hl i\en
% Wrap up serious business
\Endpiece%
\end
